var BunnyImage={IMG_CONVERT_TYPE:"image/jpeg",IMG_QUALITY:.7,getImage:function(e){return"string"==typeof e?this.getImageByURL(e):this.getImageByBlob(e)},getImageByURL:function(e){return this._toImagePromise(e,!0)},_toImagePromise:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new Image,a=new Promise(function(e,t){n.onload=function(){e(n)},n.onerror=function(e){t(e)}});return t&&(n.crossOrigin="Anonymous"),n.src=e,a},getImageByBlob:function(e){var t=BunnyFile.getBlobLocalURL(e);return this._toImagePromise(t)},getImageByBase64:function(e){var t=e;return this._toImagePromise(t)},getImageByCanvas:function(e){var t=e.toDataURL(this.IMG_CONVERT_TYPE,this.IMG_QUALITY);return this._toImagePromise(t)},imageToCanvas:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e.complete)throw new Error("Can not create canvas from Image. Image is not loaded yet.");var a=document.createElement("canvas");return null===t&&null===n?(a.width=e.naturalWidth,a.height=e.naturalHeight,a.getContext("2d").drawImage(e,0,0)):(a.width=t,a.height=n,a.getContext("2d").drawImage(e,0,0,t,n)),a},imageToBase64:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return this.imageToCanvas(e,t,n).toDataURL(this.IMG_CONVERT_TYPE,this.IMG_QUALITY)},imageToBlob:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return BunnyFile.base64ToBlob(this.imageToBase64(e,t,n))},getImageURL:function(e){return e.src},getImageWidth:function(e){if(!e.complete)throw new Error("Can not get Image.width. Image is not loaded yet.");return e.width},getImageHeight:function(e){if(!e.complete)throw new Error("Can not get Image.height. Image is not loaded yet.");return e.height},getImageNewAspectSizes:function(e,t,n){var a=this.getImageWidth(e),i=this.getImageHeight(e);if(0===a||0===i)throw new Error("Image width or height is 0 in BunnyImage.getImageNewAspectSizes().");var o=Math.min(t/a,n/i);return{width:Math.floor(a*o),height:Math.floor(i*o)}},resizeImage:function(e,t,n){var a=this.getImageNewAspectSizes(e,t,n),i=a.width,o=a.height,g=this.imageToCanvas(e,i,o);return this.getImageByCanvas(g)}};